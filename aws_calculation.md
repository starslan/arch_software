### Детализация расчетов облачной инфраструктуры

#### 2. Облачная инфраструктура (ежегодно)

**Методология расчета:**
- Все расчеты приведены в российских рублях (RUB) по курсу 1 USD = 90 RUB
- Учтена годовая инфляция 5% на облачные услуги
- Объемы данных растут пропорционально количеству пользователей
- Коэффициент 1.05 — это учет годовой инфляции на облачные услуги

---

##### 1. Вычисления (Kubernetes nodes)
**Конфигурация:** m6i.xlarge (4 vCPU, 16 GB RAM)  
**Источник цен:** [AWS EC2 Pricing](https://aws.amazon.com/ec2/pricing/on-demand/)  
**Стоимость:** $0.192/час = ~17.28 RUB/час

**Расчет:**
```plaintext
Год 1: 50 инстансов × 17.28 RUB/час × 24 часа × 365 дней = 7 568 640 RUB ≈ 7 570 000 RUB
Год 2: 250 инстансов × (17.28 × 1.05) × 24 × 365 = 37 843 200 RUB ≈ 37 900 000 RUB  
Год 5: 1000 инстансов × (17.28 × 1.05⁴) × 24 × 365 = 151 372 800 RUB ≈ 151 400 000 RUB
```

---

##### 2. Базы данных (PostgreSQL/TimescaleDB)
**Конфигурация:**
- Управляемый кластер RDS (Multi-AZ)
- db.t3.medium (2 vCPU, 4 GB RAM) + 1000 Provisioned IOPS
- Хранилище: gp3 (1000 GB)

**Источник цен:** [AWS RDS Pricing](https://aws.amazon.com/rds/pricing/)  
**Стоимость:**
- Инстанс: $0.154/час = ~13.86 RUB/час
- Хранилище: $0.143/GB-мес = ~12.87 RUB/GB-мес
- IOPS: $0.00056/IOPS-час = ~0.05 RUB/IOPS-час

**Расчет для Год 1 (10 TB):**
```plaintext
Инстансы: 5 нод × 13.86 RUB/час × 24 × 365 = 607 968 RUB
Хранилище: 10 000 GB × 12.87 RUB/GB-мес × 12 = 1 544 400 RUB
IOPS: 1000 IOPS × 0.05 RUB/IOPS-час × 24 × 365 = 438 000 RUB
Резервные копии/трафик: ~3 000 000 RUB
Итого: 607 968 + 1 544 400 + 438 000 + 3 000 000 = 5 590 368 RUB ≈ 5 600 000 RUB
```

---

##### 3. Сеть и CDN
**Источник цен:** [AWS CloudFront Pricing](https://aws.amazon.com/cloudfront/pricing/)  
**Тарифы:**
- Исходящий трафик: $0.085/GB = ~7.65 RUB/GB
- HTTP-запросы: $0.0075/10K запросов = ~0.675 RUB/10K запросов
- Data Transfer между AZ - Плата за передачу данных между сервисами внутри облака

**Расчет для Год 1:**
```plaintext
Трафик: 50 000 GB × 7.65 RUB/GB = 382 500 RUB
Запросы: 500 000 000 запросов × (0.675 RUB / 10 000) = 33 750 RUB
Data Transfer между AZ: ~1 200 000 RUB
Итого: 382 500 + 33 750 + 1 200 000 = 1 616 250 RUB ≈ 1 620 000 RUB
```

---

##### 4. Хранение данных (S3)
**Источник цен:** [AWS S3 Pricing](https://aws.amazon.com/s3/pricing/)  
**Тарифы:** Standard Storage - $0.023/GB-мес = ~2.07 RUB/GB-мес


**Расчет:**
```plaintext
Год 1: 10 000 GB × 2.07 RUB/GB-мес × 12 месяцев = 248 400 RUB ≈ 250 000 RUB
Год 2: 50 000 GB × (2.07 × 1.05) × 12 = 1 305 000 RUB ≈ 1 310 000 RUB
Год 5: 500 000 GB × (2.07 × 1.05⁴) × 12 = 5 220 000 RUB ≈ 5 300 000 RUB
```

*Примечание: В итоговой сумме учтены также затраты на API-запросы к S3*

---

##### 5. Управляемые сервисы
**Kafka (MSK):**  
[Источник цен](https://aws.amazon.com/msk/pricing/)  
$0.11/брокер-час = ~9.9 RUB/брокер-час
```plaintext
3 брокера × 9.9 RUB/час × 24 × 365 = 260 712 RUB/год
```

**Redis (ElastiCache):**  
[Источник цен](https://aws.amazon.com/elasticache/redis/pricing/)  
$0.052/нода-час = ~4.68 RUB/нода-час
```plaintext
5 нод × 4.68 RUB/час × 24 × 365 = 204 984 RUB/год
```

**Итого для Год 1:** 260 712 + 204 984 = 465 696 RUB ≈ 500 000 RUB

---

#### Предполагаемые объемы данных
| Ресурс | Год 1 | Год 2   | Год 5    | Единица измерения |
|--------|-------|---------|----------|-------------------|
| Пользователи | 100K  | 500K    | 5M       | активных пользователей |
| Ежедневный трафик | 130 GB | 650 GB  | 7 TB     | исходящий трафик в день |
| Ежемесячные запросы | 40M   | 200M    | 2 ТB     | HTTP-запросов в месяц |
| Хранилище | 10 TB | 50 TB   | 500 TB   | объем данных в S3 |
| Обработка событий | 10K/сек | 50K/сек | 500K/сек | сообщений в Kafka |