## ADR 1: Выбор СУБД для User Service
**Дата:** 2025-07-19  
**Статус:** Принято

### Контекст
Требуется надежное хранение пользовательских данных (аутентификация, профили) с поддержкой транзакций для интеграции с платежами.

### Сравнение вариантов
| Критерий          | PostgreSQL       | MongoDB          | DynamoDB         | **Выбор**        |
|-------------------|------------------|------------------|------------------|------------------|
| **Транзакции**    | ACID-совместимые | Документные      | Ограниченные     | **PostgreSQL**   |
| **Масштабируемость** | Шардирование сложно | Горизонтальное | Автоматическое   | —                |
| **Стоимость**     | Средняя          | Средняя          | Высокая (pay-per-request) | **PostgreSQL**   |
| **Производительность** | Высокая (OLTP) | Высокая (неструктурированные данные) | Низкая задержка | —   |
| **Безопасность**  | RBAC, шифрование | RBAC             | IAM              | Оба              |

### Решение
PostgreSQL.

### Обоснование
Требования к ACID-транзакциям для финансовых операций и опыт команды с PostgreSQL.

### Последствия
- Гарантированная целостность данных
- Сложность шардирования при >1M пользователей
- Совместимость с существующими ERP-системами
